<div x-show="activeTab === 'console'" x-transition class="space-y-6">
  <div class="card rounded-xl p-6">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-white">System Console</h2>
      <div class="flex items-center space-x-2">
        <button @click="toggleFilter" 
                :class="showFilterPanel ? 'text-purple-400' : 'text-gray-400'"
                class="hover:text-white transition-colors px-2 py-1 rounded"
                title="Filter by HTTP signature">
          <i class="fas fa-filter"></i>
        </button>
        <button @click="toggleIpDisplay" 
                :class="showIpAddresses ? 'text-blue-400' : 'text-gray-400'"
                class="hover:text-white transition-colors px-2 py-1 rounded"
                title="Show IP addresses">
          <i class="fas fa-globe"></i>
        </button>
        <button @click="downloadLogs" 
                class="text-green-400 hover:text-green-300 transition-colors px-2 py-1 rounded"
                title="Download logs">
          <i class="fas fa-download"></i>
        </button>
        <span class="text-gray-400 text-sm" x-text="getFilteredLogs().length + ' / ' + logs.length + ' logs'"></span>
      </div>
    </div>
    
    <div class="flex">
      <!-- Console Output -->
      <div class="flex-1 bg-black rounded-lg p-4 overflow-y-auto text-sm font-mono" 
           style="height: calc(100vh - 350px); min-height: 400px;"
           id="console" :class="showFilterPanel ? 'mr-4' : ''">
        
        <!-- Connection Error Banner -->
        <div x-show="logConnectionError" class="mb-4 bg-red-900/50 border border-red-500 rounded-lg p-3">
          <div class="flex items-center">
            <i class="fas fa-exclamation-triangle text-red-400 mr-2"></i>
            <span class="text-red-300 text-sm">Failed to connect to log source. Retrying...</span>
          </div>
        </div>
        
        <template x-for="log in getFilteredLogs()" :key="'log-' + log.timestamp_ms">
          <div class="mb-2" 
               :style="selectedFilter && log.signature && log.signature !== selectedFilter ? 'opacity: 0.3' : ''">
            <!-- HTTP Request Format -->
            <div x-show="log.type === 'http'" class="flex items-start space-x-2">
              <span class="text-gray-400 text-xs" x-text="log.timestamp"></span>
              <span :class="getMethodColor(log.method)" x-text="log.method"></span>
              <span class="text-blue-300" x-text="log.path"></span>
              <span :class="getStatusColor(log.status)" x-text="log.status"></span>
              <span class="text-yellow-400" x-text="log.latency"></span>
              <span x-show="showIpAddresses && log.ip" class="text-gray-500 text-xs" x-text="log.ip"></span>
            </div>
            
            <!-- General Log Format -->
            <div x-show="log.type !== 'http'" :class="getLogColor(log.level)">
              <span class="text-gray-400 text-xs" x-text="log.timestamp"></span>
              <span class="ml-2" x-text="log.message"></span>
            </div>
          </div>
        </template>
        
        <div x-show="getFilteredLogs().length === 0 && !logConnectionError" class="text-gray-500 text-center py-8">
          <span x-show="logs.length === 0">No logs available</span>
          <span x-show="logs.length > 0 && selectedFilter">No logs match the selected signature</span>
        </div>
      </div>
      
      <!-- Filter Side Panel -->
      <div x-show="showFilterPanel" 
           x-transition:enter="transition ease-out duration-200"
           x-transition:enter-start="opacity-0 transform translate-x-4"
           x-transition:enter-end="opacity-100 transform translate-x-0"
           x-transition:leave="transition ease-in duration-150"
           x-transition:leave-start="opacity-100 transform translate-x-0"
           x-transition:leave-end="opacity-0 transform translate-x-4"
           class="w-80 bg-black/50 rounded-lg p-4">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-white font-medium text-sm">HTTP Signatures</h3>
          <button x-show="selectedFilter" 
                  @click="clearFilter"
                  class="text-red-400 hover:text-red-300 text-xs">
            Clear Filter
          </button>
        </div>
        <div class="space-y-2 max-h-52 overflow-y-auto">
          <template x-for="entry in getUniqueHttpSignatures()" :key="'sig-' + entry.hash">
            <div @click="selectFilter(entry.signature)"
                 :class="selectedFilter === entry.signature ? 'bg-purple-600/30 border-purple-500' : 'bg-gray-700/50 border-gray-600 hover:bg-gray-600/50'"
                 class="p-2 rounded border cursor-pointer transition-colors">
              <div class="flex items-center justify-between">
                <span :class="getMethodColor(entry.method)" 
                      class="text-xs font-bold" x-text="entry.method"></span>
                <span class="text-purple-300 text-xs font-medium" x-text="entry.count"></span>
              </div>
              <div class="text-gray-300 text-xs mt-1 truncate" x-text="entry.path"></div>
            </div>
          </template>
        </div>
      </div>
    </div>
  </div>
</div>
